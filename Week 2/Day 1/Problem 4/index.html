<!DOCTYPE html>
<html>
<head>
    <title>Mini Expense Tracker</title>
</head>
<body>

<h2>Expense Tracker</h2>

<input type="text" id="title" placeholder="Expense Title">
<input type="number" id="amount" placeholder="Amount">
<input type="date" id="date">

<button onclick="addExpense()">Add Expense</button>
<button onclick="viewExpenses()">View Expenses</button>
<button onclick="deleteExpense()">Delete Expense</button>

<ul id="expenseList"></ul>

<script>

let db = openDatabase("ExpenseDB", "1.0", "Expense Database", 2 * 1024 * 1024);

db.transaction(function(tx) {
    tx.executeSql(
        "CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, amount REAL, date TEXT)"
    );
});

function addExpense() {

    let title = document.getElementById("title").value;
    let amount = document.getElementById("amount").value;
    let date = document.getElementById("date").value;

    db.transaction(function(tx) {

        tx.executeSql(
            "INSERT INTO expenses (title, amount, date) VALUES (?, ?, ?)",
            [title, amount, date],
            function() {
                alert("Expense Added");
            },
            function(tx, error) {
                alert("Insert Error: " + error.message);
            }
        );

    }, function(error) {
        alert("Transaction Error: " + error.message);
    });

}

function viewExpenses() {

    db.transaction(function(tx) {

        tx.executeSql(
            "SELECT * FROM expenses",
            [],
            function(tx, results) {

                let list = document.getElementById("expenseList");
                list.innerHTML = "";

                for (let i = 0; i < results.rows.length; i++) {
                    let row = results.rows.item(i);
                    let li = document.createElement("li");
                    li.textContent = row.id + " - " + row.title + " - " + row.amount + " - " + row.date;
                    list.appendChild(li);
                }

            },
            function(tx, error) {
                alert("Select Error: " + error.message);
            }
        );

    });

}

function deleteExpense() {

    let id = prompt("Enter Expense ID to delete:");

    db.transaction(function(tx) {

        tx.executeSql(
            "DELETE FROM expenses WHERE id = ?",
            [id],
            function() {
                alert("Expense Deleted");
            },
            function(tx, error) {
                alert("Delete Error: " + error.message);
            }
        );

    }, function(error) {
        alert("Transaction Error: " + error.message);
    });

}

</script>

</body>
</html>